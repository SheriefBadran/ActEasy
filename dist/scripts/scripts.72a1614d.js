"use strict";angular.module("activities",[]),angular.module("services",[]),angular.module("actEasy",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","activities","services","uiGmapgoogle-maps"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{templateUrl:"views/main.html"}).when("/about",{templateUrl:"views/about.html",controller:"ViewCtrl",resolve:{view:["$q",function(a){var b=a.defer();return b.resolve(),b.promise}]}}).when("/auth",{controller:function(){console.log("hej")}}).when("/activities",{templateUrl:"views/main.html",resolve:{view:["$q","$http",function(a,b){var c=a.defer();b.get("http://easyact-portfolio80.rhcloud.com/authenticate").success(function(a){return console.log(a),c.resolve(),c.promise}),c.reject()}]}}).when("/activities/:activityId",{templateUrl:"views/activity-detail.html",controller:"ActivityDetailCtrl"}).otherwise({redirectTo:"/"}),b.interceptors.push(["$q","$location",function(a,b){return{responseError:function(c){return 401===c.status&&(console.log("NOT AUTHORIZED!"),b.path("/")),a.reject(c)}}}])}]),angular.module("actEasy").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("actEasy").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("activities").controller("ActivityListCtrl",["activityService","$q",function(a,b){var c=b.defer(),d=this;d.activities=[],d.showOutdoors=!0,d.showIndoors=!0,d.pos=[],d.showOutdoorsOnly=function(){d.showOutdoors=!0,d.showIndoors=!1},d.showIndoorsOnly=function(){d.showOutdoors=!1,d.showIndoors=!0},d.showAll=function(){d.showOutdoors=!0,d.showIndoors=!0},c.promise.then(function(){navigator.geolocation.getCurrentPosition(function(b){d.pos=b.coords,a.getActivities(d.pos).success(function(a){d.activities=a,console.log(a)})})}),c.resolve()}]).controller("ActivityDetailCtrl",["$scope","$routeParams","$http",function(a,b,c){var d,e,f,g=new google.maps.DirectionsService,h={};c.get("http://easyact-portfolio80.rhcloud.com/activity-details?name="+b.activityId).success(function(b){a.activity=b,a.userObj={username:"name"}}).then(function(){navigator.geolocation.getCurrentPosition(function(a){e=new google.maps.DirectionsRenderer,f=new google.maps.LatLng(a.latitude,a.longitude),h.zoom=7,h.center=f,d=new google.maps.Map(document.getElementById("map"),h),e.setMap(d),i(a)})});var i=function(b){var c=new google.maps.LatLng(b.coords.latitude,b.coords.longitude),d=a.activity.address.street+" "+a.activity.address.postalcode+", "+a.activity.address.city,f={origin:c,destination:d,travelMode:google.maps.TravelMode.DRIVING};g.route(f,function(a,b){b===google.maps.DirectionsStatus.OK&&e.setDirections(a)})}}]),angular.module("activities").directive("activity",function(){return{templateUrl:"../../partials/activity-section.html",restrict:"E",scope:{item:"="},controller:["$scope",function(){}]}}),angular.module("services").service("weatherService",["$http",function(a){this.getWeather=function(){return a.get("http://opendata-download-metfcst.smhi.se/api/category/pmp1.5g/version/1/geopoint/lat/56.68/lon/16.36/data.json")}}]),angular.module("services").service("activityService",["$http",function(a){this.getActivities=function(b){return console.log("lat: "+b.latitude),console.log("lon: "+b.longitude),a({url:"http://easyact-portfolio80.rhcloud.com/near-activities",method:"GET",params:{lat:b.latitude,lon:b.longitude}})}}]),angular.module("actEasy").controller("ViewCtrl",["$scope",function(a){a.model={message:"This is my app."}}]),angular.module("services").service("authenticationService",["$http",function(a){this.authenticate=function(){return a.get("http://easyact-portfolio80.rhcloud.com/authenticate")}}]);